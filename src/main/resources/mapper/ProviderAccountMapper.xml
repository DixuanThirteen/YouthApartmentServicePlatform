<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yasp.mapper.ProviderAccountMapper">
    <resultMap id="ProviderAccountResultMap" type="com.yasp.entity.ProviderAccount">
        <id     property="id"          column="id"/>

        <result property="providerId"  column="provider_id"/>

        <result property="username"    column="username"/>
        <result property="email"       column="email"/>
        <result property="phone"       column="phone"/>

        <!-- 实体的 password 对应表里的 password_hash -->
        <result property="password"    column="password_hash"/>

        <result property="role"        column="role"/>
        <result property="status"      column="status"/>

        <!-- 注意：createAt / updateAt 对应 created_at / updated_at -->
        <result property="createAt"    column="created_at"/>
        <result property="updateAt"    column="updated_at"/>
    </resultMap>

    <insert id="insertProviderAccount"
            parameterType="com.yasp.entity.ProviderAccount"
            useGeneratedKeys="true"
            keyProperty="id">
        INSERT INTO ProviderAccounts (
        provider_id,
        username,
        email,
        phone,
        password_hash,
        role,
        status
        -- created_at, updated_at 交给数据库默认值
        ) VALUES (
        #{providerId},
        #{username},
        #{email},
        #{phone},
        #{password},   <!-- 实体的 password，映射到 password_hash -->
        #{role},
        #{status}
        )
    </insert>
</mapper>